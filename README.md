# üéì IKNI Assistant ‚Äî RAG MVP (Streamlit + FAISS + LPNU + Telegram)

**IKNI Assistant** ‚Äî –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ –ø—Ä–∞—Ü—é—é—á–∞ –≤–µ—Ä—Å—ñ—è (MVP) Retrieval-Augmented Generation —Å–∏—Å—Ç–µ–º–∏ –¥–ª—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–æ–≥–æ —Å—É–ø—Ä–æ–≤–æ–¥—É —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ **–ù–ù–Ü–ö–ù–Ü –õ–ü–ù–£**.  
–°–∏—Å—Ç–µ–º–∞ –∑–±–∏—Ä–∞—î –¥–∞–Ω—ñ –∑ –≤—ñ–¥–∫—Ä–∏—Ç–∏—Ö –¥–∂–µ—Ä–µ–ª (**LPNU —Å—Ç–æ—Ä—ñ–Ω–∫–∏ / Wiki / Telegram –∫–∞–Ω–∞–ª pbikni**), —Ñ–æ—Ä–º—É—î –ª–æ–∫–∞–ª—å–Ω–∏–π –∞—Ä—Ö—ñ–≤ –∑–Ω–∞–Ω—å (`local_cache.jsonl`), –±—É–¥—É—î –≤–µ–∫—Ç–æ—Ä–Ω–∏–π —ñ–Ω–¥–µ–∫—Å **FAISS** —Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –Ω–∞ –∑–∞–ø–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —á–µ—Ä–µ–∑ **—Å–µ–º–∞–Ω—Ç–∏—á–Ω–∏–π retrieval** (offline) –∞–±–æ **RAG + LLM** (online).

---

## ‚úÖ –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ (MVP)

- **Streamlit UI**: –∑–∞–ø–∏—Ç–∏ –ø—Ä–∏—Ä–æ–¥–Ω–æ—é –º–æ–≤–æ—é + —Ç–∞–±–ª–∏—Ü—è –¥–∂–µ—Ä–µ–ª (top-K).
- **ONLINE / OFFLINE —Ä–µ–∂–∏–º**:
  - ONLINE: –¥–æ—Å—Ç—É–ø–Ω—ñ sync –¥–∞–Ω–∏—Ö (LPNU + TG), LLM API.
  - OFFLINE: –ø—Ä–∞—Ü—é—î —Ç—ñ–ª—å–∫–∏ –ª–æ–∫–∞–ª—å–Ω–∏–π –∞—Ä—Ö—ñ–≤ —Ç–∞ —ñ–Ω–¥–µ–∫—Å.
- **Ingestion pipeline**:
  - LPNU/Wiki —Å—Ç–æ—Ä—ñ–Ω–∫–∏ ‚Üí –æ—á–∏—â–µ–Ω–Ω—è —Ç–µ–∫—Å—Ç—É (trafilatura) ‚Üí chunking ‚Üí `local_cache.jsonl`
  - Telegram –∫–∞–Ω–∞–ª `t.me/pbikni` ‚Üí last N messages ‚Üí chunking ‚Üí `local_cache.jsonl`
- **Vector Search**:
  - SentenceTransformers embeddings
  - FAISS IndexFlatIP (cosine similarity —á–µ—Ä–µ–∑ normalize_embeddings)
- **RAG Answering**:
  - Offline summarizer (–±–µ–∑ LLM)
  - Optional LLM (OpenAI-compatible API: OpenAI / Groq / OpenRouter / Ollama / Custom)
- **–ë–µ–∑–ø–µ–∫–∞**:
  - VNS login/password –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –≤ `session_state` (–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞ –ø–∞–º‚Äô—è—Ç—å) —ñ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –æ—á–∏—â–µ–Ω—ñ –∫–Ω–æ–ø–∫–æ—é.

---

## üß± –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ–π

- Python 3.10+ (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ 3.10 –∞–±–æ 3.11)
- Streamlit
- FAISS
- SentenceTransformers
- Telethon (Telegram ingestion)
- requests + trafilatura (LPNU ingestion)
- (optional) OpenAI-compatible LLM API

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

RagSystem/
app.py
core/
config.py
index.py
rag.py
llm.py
sources.py
ingest_utils.py
security.py
pipelines/
ingest_lpnu.py
ingest_telegram.py
sync_all.py
data/
(telegram session files)
requirements.txt
README.md
.gitignore

---

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### 1) –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
```bash
git clone <YOUR_REPO_URL>
cd RagSystem
```
2) –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

Windows (PowerShell):

python -m venv .venv
.venv\Scripts\activate


Linux / macOS:

python -m venv .venv
source .venv/bin/activate

3) –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
pip install -r requirements.txt


‚ö†Ô∏è –Ø–∫—â–æ –≤–∏–Ω–∏–∫–∞—é—Ç—å –∫–æ–Ω—Ñ–ª—ñ–∫—Ç–∏ numpy/faiss ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ:

Python 3.10 –∞–±–æ 3.11

numpy<2.0

faiss-cpu==1.8.0.post1

‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É
streamlit run app.py


–í—ñ–¥–∫—Ä–∏–π —É –±—Ä–∞—É–∑–µ—Ä—ñ: http://localhost:8501

üîÑ –ü–µ—Ä—à–µ –Ω–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –±–∞–∑–∏ (Sync)

–£–≤—ñ–º–∫–Ω–∏ Online mode (–ª—ñ–≤–∞ –ø–∞–Ω–µ–ª—å).

(–û–ø—Ü—ñ–π–Ω–æ) –≤–≤–µ–¥–∏ Telegram API ID + HASH –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–æ—Å—Ç—ñ–≤ –∑ –∫–∞–Ω–∞–ª—É pbikni.

–ù–∞—Ç–∏—Å–Ω–∏:

Sync knowledge base (LPNU + TG + rebuild index)
–¶–µ:

–ø—ñ–¥—Ç—è–≥–Ω–µ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –Ü–ö–ù–Ü + Wiki

–ø—ñ–¥—Ç—è–≥–Ω–µ Telegram (—è–∫—â–æ –∑–∞–¥–∞–Ω–æ)

–∑–±–µ—Ä–µ–∂–µ —á–∞–Ω–∫–∏ –≤ local_cache.jsonl

–ø–µ—Ä–µ–±—É–¥—É—î FAISS —ñ–Ω–¥–µ–∫—Å

–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –º–æ–∂–Ω–∞ –∑–∞–¥–∞–≤–∞—Ç–∏ –∑–∞–ø–∏—Ç–∏.

    –ü—Ä–∏–∫–ª–∞–¥–∏ –∑–∞–ø–∏—Ç—ñ–≤

–•—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä –Ü–ö–ù–Ü?

–ö–æ–ª–∏ —Å—Ç–≤–æ—Ä–µ–Ω–æ –Ü–ö–ù–Ü?

–•—Ç–æ –≤—Ö–æ–¥–∏—Ç—å –≤ –∫–µ—Ä—ñ–≤–Ω–∏—Ü—Ç–≤–æ –Ü–ö–ù–Ü?

–Ø–∫–∞ —ñ—Å—Ç–æ—Ä—ñ—è –Ü–ö–ù–Ü?

–©–æ –Ω–æ–≤–æ–≥–æ –≤ Telegram –∫–∞–Ω–∞–ª—ñ pbikni?

–Ø–∫—ñ –ø–∞—Ä—Ç–Ω–µ—Ä–∏ —ñ–Ω—Å—Ç–∏—Ç—É—Ç—É?

    –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è LLM (–æ–ø—Ü—ñ–π–Ω–æ)

–£ –ª—ñ–≤—ñ–π –ø–∞–Ω–µ–ª—ñ:

–£–≤—ñ–º–∫–Ω–∏ Online mode

–í—ñ–¥–∫—Ä–∏–π LLM —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è

    –í–∏–±–µ—Ä–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞:

openai

groq

openrouter

ollama

custom

–í–∏–±–µ—Ä–∏ –º–æ–¥–µ–ª—å –∑—ñ —Å–ø–∏—Å–∫—É (–∞–±–æ –≤—Ä—É—á–Ω—É)

–í–≤–µ–¥–∏ API key (–¥–ª—è ollama –∫–ª—é—á –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω)

–ù–∞—Ç–∏—Å–Ω–∏ Test LLM

‚ÑπÔ∏è Temperature:

0.0‚Äì0.3 ‚Üí –∫–æ—Ä–æ—Ç–∫–æ —Ç–∞ —Å—Ç–∞–±—ñ–ª—å–Ω–æ

0.4‚Äì0.7 ‚Üí –±–∞–ª–∞–Ω—Å

0.8‚Äì1.0 ‚Üí –±—ñ–ª—å—à ‚Äú–∫—Ä–µ–∞—Ç–∏–≤–Ω–æ‚Äù —Ç–∞ —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–æ

    Telegram ingestion (pbikni)

–°–∏—Å—Ç–µ–º–∞ –ø—ñ–¥—Ç—Ä–∏–º—É—î –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –∑ Telegram –∫–∞–Ω–∞–ª—É —á–µ—Ä–µ–∑ Telethon.

–Ø–∫ –æ—Ç—Ä–∏–º–∞—Ç–∏ api_id —Ç–∞ api_hash

–ü–µ—Ä–µ–π–¥–∏ –Ω–∞ https://my.telegram.org/apps

–°—Ç–≤–æ—Ä–∏ application (API Development Tools)

–°–∫–æ–ø—ñ—é–π api_id —Ç–∞ api_hash

‚ö†Ô∏è –ü—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–ø—É—Å–∫—É Telethon –ø–æ–ø—Ä–æ—Å–∏—Ç—å –∫–æ–¥ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è (SMS/Telegram).
–°–µ—Å—ñ—è –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ —É data/tg_session.*

üîê VNS —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è (–ø—ñ–¥–≥–æ—Ç–æ–≤—á–∏–π –º–æ–¥—É–ª—å)

–£ MVP —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ:

–±–µ–∑–ø–µ—á–Ω–µ –≤–≤–µ–¥–µ–Ω–Ω—è –ª–æ–≥—ñ–Ω—É/–ø–∞—Ä–æ–ª—é VNS —É UI

–∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ç—ñ–ª—å–∫–∏ –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ñ–π –ø–∞–º‚Äô—è—Ç—ñ (session_state)

–º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –æ—á–∏—â–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –∫–Ω–æ–ø–∫–æ—é

–ü–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∏–π –ø–∞—Ä—Å–∏–Ω–≥ VNS —Ç–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤ –ø–ª–∞–Ω—É—î—Ç—å—Å—è —è–∫ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –µ—Ç–∞–ø.

üß† Offline —Ä–µ–∂–∏–º

–£ OFFLINE —Ä–µ–∂–∏–º—ñ —Å–∏—Å—Ç–µ–º–∞:

–Ω–µ –≤–∏–∫–æ–Ω—É—î –º–µ—Ä–µ–∂–µ–≤–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤

–Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—î –¥–∞–Ω—ñ

–Ω–µ –≤–∏–∫–ª–∏–∫–∞—î LLM

–ø—Ä–∞—Ü—é—î —Ç—ñ–ª—å–∫–∏ –∑ –ª–æ–∫–∞–ª—å–Ω–∏–º local_cache.jsonl —Ç–∞ FAISS —ñ–Ω–¥–µ–∫—Å–æ–º

üßπ –û—á–∏—â–µ–Ω–Ω—è –ª–æ–∫–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö

–£ UI —î —Ä–µ–∂–∏–º:

Wipe local cache + index
—è–∫–∏–π –≤–∏–¥–∞–ª—è—î:

local_cache.jsonl

FAISS —ñ–Ω–¥–µ–∫—Å —Ç–∞ –º–µ—Ç–∞–¥–∞–Ω—ñ

–¶–µ –∫–æ—Ä–∏—Å–Ω–æ –¥–ª—è —Ç–µ—Å—Ç—ñ–≤ ‚Äú–∑ –Ω—É–ª—è‚Äù.

üõ°Ô∏è –ë–µ–∑–ø–µ–∫–∞

API –∫–ª—é—á—ñ LLM —Ç–∞ Telegram –∫—Ä–µ–¥–µ–Ω—à–∞–ª–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ —É session_state (–ø–∞–º‚Äô—è—Ç—å –ø—Ä–æ—Ü–µ—Å—É Streamlit).

VNS –ª–æ–≥—ñ–Ω/–ø–∞—Ä–æ–ª—å –Ω–µ –∑–∞–ø–∏—Å—É—é—Ç—å—Å—è —É —Ñ–∞–π–ª–∏, –Ω–µ –ª–æ–≥—É—é—Ç—å—Å—è, –º–æ–∂—É—Ç—å –±—É—Ç–∏ –æ—á–∏—â–µ–Ω—ñ –≤—Ä—É—á–Ω—É.

data/, local_cache.jsonl, FAISS —ñ–Ω–¥–µ–∫—Å —Ç–∞ *.session –Ω–µ –ø–æ–≤–∏–Ω–Ω—ñ –ø—É—à–∏—Ç–∏—Å—å —É Git (–¥–∏–≤. .gitignore).

üìå –ê–≤—Ç–æ—Ä

–ö–æ–º–∞—Ä–Ω–∏—Ü—å–∫–∏–π –ë–æ–≥–¥–∞–Ω (–®–Ü-42)
–ü—Ä–æ—î–∫—Ç: —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–æ–¥—É–ª—è –∞–Ω–∞–ª—ñ–∑—É –¥–∞–Ω–∏—Ö —É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω—ñ–π —Å–∏—Å—Ç–µ–º—ñ (RAG MVP)
–õ—å–≤—ñ–≤—Å—å–∫–∞ –ø–æ–ª—ñ—Ç–µ—Ö–Ω—ñ–∫–∞ ‚Äî –ù–ù–Ü–ö–ù–Ü